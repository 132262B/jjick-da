<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="app.jjickda.api.question.repository.QuestionRepository">

    <select id="questionSelect" resultType="QuestionListDto">
        SELECT esc.sub_ctg_seq AS questionSeq
            , concat(emc.main_ctg_name,"-",esc.sub_ctg_name) AS questionName
        FROM exam_main_category emc
            JOIN exam_sub_category esc
        ON emc.main_ctg_seq = esc.main_ctg_seq
    </select>

    <select id="termSelect" resultType="QuestionListDto">
        SELECT sub_ctg_seq AS questionSeq,
            exam_seq AS termSeq,
            exam_name AS termName
            FROM exam
        WHERE sub_ctg_seq = #{questionSeq}
    </select>

    <select id="subjectShow" resultType="QuestionListDto">
        SELECT e.sub_ctg_seq AS questionSeq,
            esj.subject_seq AS subjectSeq,
            esj.subject_name AS subjectName
        FROM exam e
            JOIN exam_subject esj
        ON e.exam_seq = esj.exam_seq
        WHERE sub_ctg_seq = #{questionSeq}
    </select>

</mapper>