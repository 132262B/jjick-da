<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="app.jjickda.api.question.repository.QuestionRepository">

    <!-- /select-certificate 주소에 자격증 목록 가져오는 구문 -->
    <select id="questionSelect" resultType="certificateListDto">
        SELECT
            TESC.IDX AS QUESTION_IDX,
            CONCAT(TEMC.MAIN_CATEGORY_NAME, '-' , TESC.SUB_CATEGORY_NAME) AS QUESTION_NAME
        FROM
            TB_EXAM_MAIN_CATEGORY AS TEMC
        JOIN
            TB_EXAM_SUB_CATEGORY AS TESC
        ON
            TEMC.IDX = TESC.MAIN_CATEGORY_IDX
    </select>

    <!-- /select-subject/{questionIdx} 주소에 과목 목록 가져오는 구문 -->
    <select id="subjectSelect" resultType="subjectListDto">
        SELECT
            IDX AS SUBJECT_IDX,
            SUBJECT_NAME
        FROM
            TB_EXAM_SUBJECT
        WHERE
            SUB_CATEGORY_IDX = #{questionIdx}
    </select>

    <select id="examSelect" resultType="examListDto">
        SELECT
            IDX AS EXAM_IDX,
            EXAM_NAME
        FROM
            TB_EXAM
        WHERE
            SUB_CATEGORY_IDX = #{questionIdx}
    </select>

</mapper>