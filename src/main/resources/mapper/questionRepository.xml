<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="app.jjickda.api.question.repository.QuestionRepository">

    <!-- /certificate 주소에 자격증 목록 가져오는 구문 -->
    <select id="questionSelect" resultType="certificateListDto">
        SELECT
            TEMC.IDX AS MAIN_IDX,
            TESC.IDX AS SUB_IDX,
            CONCAT(TEMC.MAIN_CATEGORY_NAME, '-', TESC.SUB_CATEGORY_NAME) AS CERTIFICATE_NAME
        FROM
            TB_EXAM_MAIN_CATEGORY AS TEMC
        JOIN
            TB_EXAM_SUB_CATEGORY AS TESC
        ON
            TEMC.IDX = TESC.MAIN_CATEGORY_IDX
    </select>

    <!-- subject/{subIdx} 주소에 과목 목록 가져오는 구문 -->
    <select id="subjectSelect" resultType="subjectListDto">
        SELECT
            IDX AS SUBJECT_IDX,
            SUBJECT_NAME
        FROM
            TB_EXAM_SUBJECT
        WHERE
            SUB_CATEGORY_IDX = #{subIdx}
    </select>

    <!-- exam/{subIdx} 주소에 과목 목록 가져오는 구문 -->
    <select id="examSelect" resultType="examListDto">
        SELECT
            IDX AS EXAM_IDX,
            EXAM_NAME
        FROM
            TB_EXAM
        WHERE
            SUB_CATEGORY_IDX = #{subIdx}
    </select>

</mapper>